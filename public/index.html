<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PPP - Z√°pis a diktov√°n√≠</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üìù Psychologick√° poradna - Z√°pis rozhovoru</h1>
            <div class="user-info">
                <span id="userEmail">Demo re≈æim</span>
            </div>
        </header>

        <main>
            <!-- Ovl√°dac√≠ panel -->
            <section class="controls">
                <div class="control-group">
                    <h2>Nahr√°v√°n√≠ a p≈ôepis</h2>
                    <div class="buttons">
                        <button id="startRealtime" class="btn btn-primary">
                            üé§ Spustit real-time p≈ôepis
                        </button>
                        <button id="stopRealtime" class="btn btn-danger" disabled>
                            ‚èπÔ∏è Zastavit
                        </button>
                        <button id="uploadAudio" class="btn btn-secondary">
                            üìÅ Nahr√°t audio soubor
                        </button>
                    </div>
                    <input type="file" id="audioFile" accept="audio/*" style="display:none;">

                    <div class="recording-info">
                        <span id="recordingTime">00:00</span>
                        <span id="status" class="status-indicator">P≈ôipraveno</span>
                    </div>
                </div>

                <!-- Informace o klientovi -->
                <div class="control-group">
                    <h3>Informace o klientovi</h3>
                    <div class="client-info">
                        <input type="text" id="clientName" placeholder="Jm√©no klienta (nepovinn√©)">
                        <input type="date" id="sessionDate" value="">
                        <select id="sessionType">
                            <option value="prvni">Prvn√≠ sch≈Øzka</option>
                            <option value="nasledna">N√°sledn√° sch≈Øzka</option>
                            <option value="kontrola">Kontroln√≠ sch≈Øzka</option>
                        </select>
                    </div>
                </div>
            </section>

            <!-- P≈ôepis -->
            <section class="transcript-section">
                <div class="section-header">
                    <h2>P≈ôepis rozhovoru</h2>
                    <div class="buttons">
                        <button id="loadDemo" class="btn btn-small btn-secondary">üìã Naƒç√≠st demo data</button>
                        <button id="clearTranscript" class="btn btn-small">Vymazat</button>
                    </div>
                </div>

                <!-- Panel ≈ôeƒçn√≠k≈Ø (diarizace) -->
                <div id="speakerPanel" class="speaker-panel" style="display: none;">
                    <h3>üë• Rozpoznan√≠ ≈ôeƒçn√≠ci</h3>
                    <p class="speaker-hint">P≈ôi≈ôaƒète role jednotliv√Ωm ≈ôeƒçn√≠k≈Øm pro lep≈°√≠ orientaci v p≈ôepisu:</p>
                    <div id="speakerList" class="speaker-list"></div>
                </div>

                <div id="transcript" class="transcript-box" contenteditable="true">
                    Zde se zobraz√≠ p≈ôepis rozhovoru...
                </div>
            </section>

            <!-- Strukturovan√Ω z√°pis -->
            <section class="report-section">
                <div class="section-header">
                    <h2>Strukturovan√Ω z√°pis</h2>
                    <button id="generateReport" class="btn btn-primary">ü§ñ Generovat z√°pis z p≈ôepisu</button>
                </div>

                <div class="report-form">
                    <div class="form-group">
                        <label>1. D≈Øvod n√°v≈°tƒõvy / Anamn√©za</label>
                        <textarea id="anamneza" rows="4" placeholder="Proƒç klient p≈ôi≈°el, co ho tr√°p√≠..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>2. Pozorov√°n√≠ bƒõhem sch≈Øzky</label>
                        <textarea id="pozorovani" rows="4" placeholder="Chov√°n√≠ klienta, emotivn√≠ stav, komunikace..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>3. Proveden√° vy≈°et≈ôen√≠ / Metody</label>
                        <textarea id="metody" rows="3" placeholder="Jak√© testy, dotazn√≠ky nebo metody byly pou≈æity..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>4. Zji≈°tƒõn√≠ a z√°vƒõry</label>
                        <textarea id="zavery" rows="4" placeholder="Co bylo zji≈°tƒõno, diagnostick√© z√°vƒõry..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>5. Doporuƒçen√≠ a dal≈°√≠ postup</label>
                        <textarea id="doporuceni" rows="4" placeholder="Doporuƒçen√° opat≈ôen√≠, dal≈°√≠ sch≈Øzky, doporuƒçen√≠ pro rodiƒçe/≈°kolu..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>6. Pozn√°mky psychologa</label>
                        <textarea id="poznamky" rows="3" placeholder="Intern√≠ pozn√°mky, pro dal≈°√≠ sezen√≠..."></textarea>
                    </div>
                </div>
            </section>

            <!-- Export -->
            <section class="export-section">
                <h2>Export</h2>
                <div class="buttons">
                    <button id="exportWord" class="btn btn-success">üìÑ Exportovat do Word</button>
                    <button id="exportPDF" class="btn btn-success">üìë Exportovat do PDF</button>
                    <button id="saveLocal" class="btn btn-secondary">üíæ Ulo≈æit lok√°lnƒõ</button>
                </div>
            </section>
        </main>

        <footer>
            <div class="info-box">
                <h3>‚ÑπÔ∏è Demo verze s AI</h3>
                <p><strong>üé§ P≈ôepis:</strong> Azure Speech-to-Text (5 hodin/mƒõs√≠c zdarma, pak ~1 USD/hod)</p>
                <p><strong>ü§ñ AI Z√°pis:</strong> Mistral AI Large (~0.002 USD na z√°pis, ‚Ç¨2/$2 free credit)</p>
                <p><strong>üí∞ Odhad n√°klad≈Ø:</strong> 30 sezen√≠/mƒõs√≠c = cca 500-600 Kƒç celkem</p>
            </div>
        </footer>
    </div>

    <!-- Azure Speech SDK - Lok√°ln√≠ kopie -->
    <script src="speech-sdk.js"></script>

    <!-- Fallback CDN pokud lok√°ln√≠ kopie nefunguje -->
    <script>
        if (typeof SpeechSDK === 'undefined') {
            console.warn('Lok√°ln√≠ SDK nenalezeno, naƒç√≠t√°m z CDN...');
            var script = document.createElement('script');
            script.src = 'https://aka.ms/csspeech/jsbrowserpackage';
            script.async = false;
            document.head.appendChild(script);
        }
    </script>

    <!-- Na≈°e aplikace -->
    <script src="app.js"></script>
</body>
</html>
